{"ast":null,"code":"import StringUtil from '../../../../utils/StringUtil';\nexport default {\n  name: 'ConsultCmpltHist',\n  data() {\n    return {};\n  },\n  created() {},\n  computed: {\n    consultHist() {\n      return this.$store.state.consult.consultHist;\n    }\n  },\n  methods: {\n    popupClose() {\n      window.close();\n    },\n    getConsoltHist() {\n      let item = {\n        id: this.$route.query.id,\n        consult_id: this.$route.query.consult_id\n      };\n      this.$store.dispatch(\"consult/consultHist\", item).then(() => {\n        console.log(this.consultHist);\n      }).catch(error => {\n        console.log(error);\n        alert(\"상담 내용이 없습니다.\");\n      });\n    },\n    StringUtil() {\n      var obj = StringUtil;\n      return obj;\n    }\n  },\n  mounted() {\n    this.getConsoltHist();\n  }\n};","map":{"version":3,"mappings":"AAmFE,OAAOA,UAAS,MAAO,8BAA8B;AACrD,eAAe;EACbC,IAAI,EAAE,kBAAkB;EACxBC,IAAI,GAAG;IACL,OAAO,CACP;EACF,CAAC;EACDC,OAAO,GAAG,CAEV,CAAC;EACDC,QAAQ,EAAE;IACRC,WAAW,GAAE;MACX,OAAO,IAAI,CAACC,MAAM,CAACC,KAAK,CAACC,OAAO,CAACH,WAAW;IAC9C;EACF,CAAC;EACDI,OAAO,EAAE;IACPC,UAAU,GAAE;MACVC,MAAM,CAACC,KAAK,EAAE;IAChB,CAAC;IACDC,cAAc,GAAE;MACd,IAAIC,IAAG,GAAI;QACTC,EAAC,EAAI,IAAI,CAACC,MAAM,CAACC,KAAK,CAACF,EAAE;QACzBG,UAAS,EAAI,IAAI,CAACF,MAAM,CAACC,KAAK,CAACC;MACjC;MACA,IAAI,CAACZ,MAAM,CAACa,QAAQ,CAAC,qBAAqB,EAAEL,IAAI,CAAC,CAACM,IAAI,CAAC,MAAM;QAC3DC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACjB,WAAW,CAAC;MAC/B,CAAC,EACAkB,KAAK,CAACC,KAAI,IAAK;QACdH,OAAO,CAACC,GAAG,CAACE,KAAK,CAAC;QAClBC,KAAK,CAAC,cAAc,CAAC;MACvB,CAAC,CAAC;IACJ,CAAC;IACDzB,UAAU,GAAE;MACV,IAAI0B,GAAE,GAAI1B,UAAU;MACpB,OAAO0B,GAAG;IACZ;EACF,CAAC;EACDC,OAAO,GAAE;IACP,IAAI,CAACd,cAAc,EAAE;EACvB;AACF","names":["StringUtil","name","data","created","computed","consultHist","$store","state","consult","methods","popupClose","window","close","getConsoltHist","item","id","$route","query","consult_id","dispatch","then","console","log","catch","error","alert","obj","mounted"],"sourceRoot":"","sources":["C:\\CSAI_Front\\src\\views\\pages\\consult\\popup\\ConsultHistPopup.vue"],"sourcesContent":["<template>\r\n\r\n  <div class=\"popup\">\r\n    <div>\r\n\t\t<div class=\"title_box\">\r\n\t\t\t<h1 class=\"cmplitHist\">비대면 응대이력</h1>\r\n\t\t</div>\r\n      <div class=\"popup_box st02\">\r\n\t\t<div class=\"hist_info\">\r\n\t\t\t<dl>\r\n\t\t\t\t<dt>고객명</dt>\r\n\t\t\t\t<dd>{{StringUtil().cusNmFormatter($route.query.cust_nm)}}</dd>\r\n\t\t\t</dl>\r\n\t\t\t<dl>\r\n\t\t\t\t<dt>번호</dt>\r\n\t\t\t\t<dd>{{StringUtil().phoneFormatter($route.query.tel_num)}}</dd>\r\n\t\t\t</dl>\r\n\t\t\t<dl>\r\n\t\t\t\t<dt>상담자</dt>\r\n\t\t\t\t<dd>{{StringUtil().cusNmFormatter($route.query.cstt_nm)}}</dd>\r\n\t\t\t</dl>\r\n\t\t\t<dl>\r\n\t\t\t\t<dt>상담일시</dt>\r\n\t\t\t\t<dd style=\"word-break: keep-all;\">{{StringUtil().dateFormatter1($route.query.consult_datetime)}}</dd>\r\n\t\t\t</dl>\r\n      <dl v-show=\"$route.query.go_reason != 'null'\">\r\n        <dt>출동사유</dt>\r\n        <dd>{{$route.query.go_reason}}</dd>\r\n      </dl>\r\n\t\t</div>\r\n\t\t<div class=\"hist_chat oy_s\">\r\n      <div v-for=\"(item, idx) in consultHist\" :key=\"idx\">\r\n        <div class=\"get\" v-if=\"item.sender_type == 'CT'\">\r\n          <dl>\r\n            <dt></dt>\r\n            <dd class=\"msg\" v-html=\"item.content\" v-if=\"item.content_type != 'IM'\"></dd>\r\n            <dd class=\"msg\" style=\"text-align: center;\" v-if=\"item.content_type == 'IM'\"><img :src=\"'data:image/png;base64,' + item.content\" alt=\"\" style=\"width:80%\"></dd>\r\n            <dd class=\"time\">{{item.chat_time}}</dd>\r\n          </dl>\r\n        </div>\r\n        <div class=\"send\" v-if=\"item.sender_type == 'CS'\">\r\n          <dl>\r\n            <dt></dt>\r\n            <dd class=\"msg\" v-html=\"item.content\" v-if=\"item.content_type == 'TX'\"></dd>\r\n            <dd class=\"msg\" style=\"text-align: center;\" v-if=\"item.content_type == 'IM-BASE64'\"><img :src=\"item.file_name + ',' + item.content\" alt=\"\" style=\"width:100%; border-radius: 5px; margin-top: 5px;\"></dd>\r\n            <dd class=\"msg\" style=\"text-align: center;\" v-if=\"item.content_type == 'IM'\"><img :src=\"'/nas/' + item.content\" :alt=\"item.file_name\" style=\"width:100%; border-radius: 5px; margin-top: 5px;\"></dd>\r\n            <dd class=\"time\">{{item.chat_time}}</dd>\r\n          </dl>\r\n        </div>\r\n      </div>\r\n\t\t\t<!-- <div class=\"send\">\r\n\t\t\t\t<dl>\r\n\t\t\t\t\t<dt></dt>\r\n\t\t\t\t\t<dd class=\"time\">오후 02:18</dd>\r\n\t\t\t\t\t<dd class=\"msg\">안녕하세요.안녕하세요.안녕하세요.안녕하세요.안녕하세요.안녕하세요.안녕하세요.안녕하세요.안녕하세요.안녕하세요.안녕하세요.</dd>\r\n\t\t\t\t</dl>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"error\">\r\n\t\t\t\t<p>알림톡 전송에 실패했습니다.</p>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"error\">\r\n\t\t\t\t<p>서버와 연결이 끊겼습니다.</p>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"send\">\r\n\t\t\t\t<dl>\r\n\t\t\t\t\t<dt></dt>\r\n\t\t\t\t\t<dd class=\"time\">오후 02:18</dd>\r\n\t\t\t\t\t<dd class=\"msg\">안녕하세요.안녕하세요.안녕하세요.안녕하세요.안녕하세요.안녕하세요.안녕하세요.안녕하세요.안녕하세요.안녕하세요.안녕하세요.</dd>\r\n\t\t\t\t</dl>\r\n\t\t\t</div> -->\r\n\t\t</div>\r\n      </div>\r\n      <div class=\"popup_close st02\">\r\n        <button @click=\"popupClose\">닫기</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  \r\n</template>\r\n\r\n\r\n<script>\r\n  import StringUtil from '../../../../utils/StringUtil';\r\n  export default {\r\n    name: 'ConsultCmpltHist',\r\n    data() {\r\n      return {\r\n      }\r\n    },\r\n    created() {\r\n\r\n    },\r\n    computed: {\r\n      consultHist(){\r\n        return this.$store.state.consult.consultHist;\r\n      },\r\n    },\r\n    methods: {\r\n      popupClose(){\r\n        window.close();\r\n      },\r\n      getConsoltHist(){\r\n        let item = {\r\n          id : this.$route.query.id,\r\n          consult_id : this.$route.query.consult_id,\r\n        }\r\n        this.$store.dispatch(\"consult/consultHist\", item).then(() => {\r\n          console.log(this.consultHist);\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n          alert(\"상담 내용이 없습니다.\");\r\n        });\r\n      },\r\n      StringUtil(){\r\n        var obj = StringUtil;\r\n        return obj;        \r\n      }\r\n    },\r\n    mounted(){\r\n      this.getConsoltHist();\r\n    }\r\n  }\r\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
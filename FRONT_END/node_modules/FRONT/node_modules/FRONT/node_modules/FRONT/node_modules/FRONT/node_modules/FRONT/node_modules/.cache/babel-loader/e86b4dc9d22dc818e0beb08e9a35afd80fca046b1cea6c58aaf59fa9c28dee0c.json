{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport StringUtil from '../../../utils/StringUtil';\nimport LoadingArea from '@/components/common/layer/LoadingArea'; // 로딩 레이어\nimport Multiselect from 'vue-multiselect';\nlet officesCodeArray = new Array();\nexport default {\n  name: 'AlarmNATartgetList',\n  emits: [\"openLayerPop\"],\n  components: {\n    LoadingArea,\n    Multiselect\n  },\n  data() {\n    return {\n      //------------------------------------------------------------\n      // 페이지 처리 \n      //------------------------------------------------------------\n      pageNumber: 0,\n      //페이지 번호\n      recordSize: 10,\n      //한페이지당 보여질 리스트 갯수\n      prevPage: false,\n      nextPage: false,\n      //------------------------------------------------------------\n      // 페이지 블럭 처리 \n      //------------------------------------------------------------\n      blockPerPageSize: 10,\n      //블럭당 보여질 페이지 갯수\n      blockPageNumber: 0,\n      //블럭 페이지번호\n      blockPageCnt: 0,\n      //페이지 블럭 갯수\n      prevBlock: false,\n      nextBlock: false,\n      loading: false,\n      value: [\n        // {name : '방배국사', code : 'gcode02'},\n      ],\n      options: [\n        // {name : '과천국사', code : 'gcode03'},\n        // {name : '목동국사', code : 'gcode04'},\n        // {name : '태백국사', code : 'gcode05'},\n        // {name : '화곡국사', code : 'gcode06'},\n        // {name : '수내국사', code : 'gcode07'},\n        // {name : '동대문국사', code : 'gcode08'},\n        // {name : '을지로국사', code : 'gcode09'},\n        // {name : '신림국사', code : 'gcode10'},\n        // {name : '신도림국사', code : 'gcode11'},\n      ],\n      show_reservation: false,\n      reservationDate: [{\n        value: \"09:00\"\n      }, {\n        value: \"10:00\"\n      }, {\n        value: \"11:00\"\n      }, {\n        value: \"12:00\"\n      }, {\n        value: \"13:00\"\n      }, {\n        value: \"14:00\"\n      }, {\n        value: \"15:00\"\n      }, {\n        value: \"16:00\"\n      }, {\n        value: \"17:00\"\n      }],\n      reservationTtId: \"\",\n      errorTxt: \"\"\n    };\n  },\n  created() {},\n  computed: {\n    // AI 무출동 정보 조회    \n    nonMoveTgtList() {\n      return this.$store.state.trouble.nonMoveTgtList;\n    },\n    userInfo() {\n      // 로그인 사용자 정보\n      return this.$store.state.auth.userInfo;\n    },\n    ossInfo() {\n      // 로그인 사용자 정보\n      return this.$store.state.auth.ossInfo;\n    },\n    // 국사정보 조회\n    officeCodeList() {\n      return this.$store.state.trouble.officeCodeList;\n    }\n  },\n  methods: {\n    //--------------------------------\n    // 국사정보 조회\n    //--------------------------------\n    getOfficeCodeList() {\n      let param = {\n        \"userId\": this.userInfo.loginId //사용자 ID\n      };\n\n      this.$store.dispatch(\"trouble/officeCodeList\", param).then(() => {\n        for (var i = 0; i < this.officeCodeList.length; i++) {\n          var item = {};\n          item.name = this.officeCodeList[i].officesCodeDesc;\n          item.code = this.officeCodeList[i].officesCode;\n          this.options.push(item);\n        }\n        this.getNonMoveTgtList(0);\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n    //--------------------------------\n    // AI 무출동 대상조회\n    //--------------------------------\n    getNonMoveTgtList(pageNo) {\n      if (pageNo < this.blockPageNumber * this.blockPerPageSize) {\n        this.getPrevBlock(pageNo);\n        return;\n      }\n      if (pageNo == (this.blockPageNumber + 1) * this.blockPerPageSize) {\n        this.getNextBlock(pageNo);\n        return;\n      }\n\n      //----------------------------------------------------------------\n      // Param Info\n      //----------------------------------------------------------------\n      let custName = document.getElementById(\"custName\").value; //고객명\n      let svcId = document.getElementById(\"svcId\").value; //접속번호\n      //★★★★★★★★★★★★★★ 추후 확인필요\n      if (svcId != null && svcId != '') {\n        svcId = '0' + svcId;\n        if (svcId.indexOf('02') == 1) {\n          svcId = '0' + svcId;\n        }\n      }\n      //let troubReceiptDt = document.getElementById(\"troubReceiptDt\").value;   //접수일시    \n      let rsvDt = document.getElementById(\"rsvDt\").value;\n      let svcMainClsCodeArray = this.productChk();\n      if (rsvDt == '') {\n        alert(\"희망일을 선택 하세요\");\n        document.getElementById(\"rsvDt\").focus();\n        return;\n      }\n      rsvDt = rsvDt.replace(/-/g, '');\n      let ttId = \"\";\n      // TTID 값이 URL에 포함될 경우\n      if (this.chkNull(this.ossInfo.TTID)) {\n        //document.getElementById(\"rsvDt\").value = \"\"\n        ttId = this.ossInfo.TTID;\n        //rsvDt = '';\n      }\n\n      let param = {\n        \"pageNo\": pageNo,\n        \"recordSize\": this.recordSize,\n        \"svcMainClsCode\": svcMainClsCodeArray,\n        \"custName\": custName,\n        \"svcId\": svcId,\n        \"ttId\": ttId,\n        //\"troubReceiptDt\" : troubReceiptDt,\n        \"rsvDt\": rsvDt,\n        \"userId\": this.userInfo.loginId,\n        //사용자 ID\n        \"officesCode\": officesCodeArray\n      };\n      this.loading = true;\n      this.$store.dispatch(\"trouble/nonMoveTgtList\", param).then(() => {\n        //----------------------------------------------------------------\n        // 페이징 처리        \n        //----------------------------------------------------------------\n        let listObj = this.nonMoveTgtList;\n        this.pageNumber = listObj.pageable.pageNumber; //페이지 번호\n        let totalPages = listObj.totalPages; //총페이지 수\n        let totalCnt = listObj.totalElements; //총 건수          \n        document.getElementById(\"totalCnt\").innerHTML = totalCnt.toLocaleString();\n        this.pagination(this.pageNumber, totalPages, totalCnt);\n        this.loading = false;\n        if (this.chkNull(this.ossInfo.TTID)) {\n          if (this.nonMoveTgtList.content.length != 0) {\n            //document.getElementById(\"troubReceiptDt\").value = this.nonMoveTgtList.content[0].troubReceiptDt.split(\" \")[0]\n            var rsvDt = this.nonMoveTgtList.content[0].rsvDt;\n            var cnvRsvDt = rsvDt.substr(0, 4) + \"-\" + rsvDt.substr(4, 2) + \"-\" + rsvDt.substr(6, 2);\n            document.getElementById(\"rsvDt\").value = cnvRsvDt;\n            this.$emit('openLayerPop', this.nonMoveTgtList.content[0]);\n            this.ossInfo.TTID = \"\";\n          }\n        }\n      }).catch(error => {\n        this.loading = false;\n        console.log(error);\n      });\n    },\n    pagination(pageNumber, totalPages, totalCnt) {\n      //--------------------------------------\n      // 페이지 네비게이션 처리\n      //--------------------------------------        \n      if (totalCnt == 0) {\n        this.prevPage = false;\n        this.nextPage = false;\n      } else {\n        if (pageNumber == 0) {\n          this.prevPage = false;\n          if (totalPages == 1) {\n            this.nextPage = false;\n          } else {\n            this.nextPage = true;\n          }\n        } else {\n          if (pageNumber == totalPages - 1) {\n            this.prevPage = true;\n            this.nextPage = false;\n          } else {\n            this.prevPage = true;\n            this.nextPage = true;\n          }\n        }\n      }\n\n      //--------------------------------------\n      // 페이지의 페이지 네비게이션 처리\n      //--------------------------------------        \n      let blockPageCnt = 0;\n      let blockPerPageSize = this.blockPerPageSize;\n      if (totalPages % blockPerPageSize == 0) {\n        blockPageCnt = totalPages / blockPerPageSize;\n      } else {\n        blockPageCnt = Math.floor(totalPages / blockPerPageSize) + 1;\n      }\n      this.blockPageCnt = blockPageCnt;\n      if (this.blockPageNumber == 0) {\n        this.prevBlock = false;\n        if (this.blockPageCnt == 1) {\n          this.nextBlock = false;\n        } else {\n          if (this.blockPageNumber + 1 <= this.blockPageCnt) {\n            this.nextBlock = true;\n          }\n        }\n      } else {\n        this.prevBlock = true;\n        if (this.blockPageNumber + 1 == this.blockPageCnt) {\n          this.nextBlock = false;\n        } else {\n          this.nextBlock = true;\n        }\n      }\n    },\n    getPrevBlock(pageNo) {\n      this.blockPageNumber = this.blockPageNumber - 1;\n      let pageNumber = this.blockPageNumber * this.blockPerPageSize;\n      if (pageNo != null) {\n        pageNumber = pageNo;\n      }\n      this.getNonMoveTgtList(pageNumber);\n    },\n    getNextBlock(pageNo) {\n      this.blockPageNumber = this.blockPageNumber + 1;\n      let pageNumber = this.blockPageNumber * this.blockPerPageSize;\n      if (pageNo != null) {\n        pageNumber = pageNo;\n      }\n      this.getNonMoveTgtList(pageNumber);\n    },\n    productChk() {\n      let productArray = new Array();\n      let arrProduct = document.getElementsByName(\"product\");\n      for (var i = 0; i < arrProduct.length; i++) {\n        if (arrProduct[i].checked) {\n          productArray.push(arrProduct[i].value);\n        }\n      }\n      return productArray;\n    },\n    //접수일자 셋팅\n    setReceiptDt() {\n      var now = new Date();\n      var year = now.getFullYear();\n      var month = now.getMonth() + 1;\n      if (month <= 9) {\n        month = \"0\" + month;\n      }\n      var day = now.getDate();\n      if (day <= 9) {\n        day = \"0\" + day;\n      }\n      var today = year + \"-\" + month + \"-\" + day;\n      //document.getElementById(\"troubReceiptDt\").value = today;            \n      document.getElementById(\"rsvDt\").value = today;\n    },\n    StringUtil() {\n      var obj = StringUtil;\n      return obj;\n    },\n    selectedOfficeCode(item) {\n      officesCodeArray = new Array();\n      for (var i = 0; i < item.length; i++) {\n        officesCodeArray.push(item[i].code);\n      }\n    },\n    chkNull(val) {\n      if (val != null && val != undefined && val != \"\") {\n        return true;\n      } else {\n        return false;\n      }\n    },\n    openAlarmPreviewPopup(item) {\n      let options = \"top=10, width=1200, height=950, status=no, menubar=no, toolbar=no, resizable=no\";\n      window.open(\"/popup/AlarmPreviewPopup?ttId=\" + item.ttId, \"AlarmPreviewPopup\", options);\n    },\n    rsvStr(str) {\n      return str.split(\" \")[0] + \" \" + str.split(\" \")[1].substr(0, 5);\n    },\n    showReservation(item) {\n      this.reservationTtId = item.ttId;\n      this.show_reservation = true;\n      if (item.reservationTime != null) {\n        document.getElementById(\"reservation_date\").value = item.reservationTime.split(\" \")[0];\n        document.getElementById(\"reservation_time\").value = item.reservationTime.split(\" \")[1].substr(0, 5);\n      }\n    },\n    closeReservation() {\n      this.errorTxt = \"\";\n      this.show_reservation = false;\n    },\n    setConsultReservation() {\n      let reservation_date = document.getElementById(\"reservation_date\").value;\n      if (reservation_date == \"\") {\n        this.errorTxt = \"예약일을 입력해주세요.\";\n        return;\n      }\n      this.errorTxt = \"\";\n      let reservation_time = document.getElementById(\"reservation_time\").value;\n      let rsv_time = reservation_date + \" \" + reservation_time;\n      if (confirm(rsv_time + \"로 예약 하시겠습니까?\")) {\n        let payload = {\n          tt_id: this.reservationTtId,\n          status: 'reservation',\n          rsv_time: reservation_date + \"T\" + reservation_time + \":00\"\n        };\n        this.$store.dispatch(\"consult/consultReservation\", payload).then(() => {\n          alert(\"상담이 예약되었습니다.\");\n          this.show_reservation = false;\n          this.getNonMoveTgtList(0);\n        }).catch(error => {\n          console.log(error);\n          this.errorTxt = \"시스템 에러입니다.\";\n        });\n      }\n    }\n  },\n  mounted() {\n    this.setReceiptDt(); //접수일자 셋팅\n    this.getOfficeCodeList(); //수용국사 조회\n  }\n};","map":{"version":3,"mappings":"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","names":["StringUtil","LoadingArea","Multiselect","officesCodeArray","Array","name","emits","components","data","pageNumber","recordSize","prevPage","nextPage","blockPerPageSize","blockPageNumber","blockPageCnt","prevBlock","nextBlock","loading","value","options","show_reservation","reservationDate","reservationTtId","errorTxt","created","computed","nonMoveTgtList","$store","state","trouble","userInfo","auth","ossInfo","officeCodeList","methods","getOfficeCodeList","param","loginId","dispatch","then","i","length","item","officesCodeDesc","code","officesCode","push","getNonMoveTgtList","catch","error","console","log","pageNo","getPrevBlock","getNextBlock","custName","document","getElementById","svcId","indexOf","rsvDt","svcMainClsCodeArray","productChk","alert","focus","replace","ttId","chkNull","TTID","listObj","pageable","totalPages","totalCnt","totalElements","innerHTML","toLocaleString","pagination","content","cnvRsvDt","substr","$emit","Math","floor","productArray","arrProduct","getElementsByName","checked","setReceiptDt","now","Date","year","getFullYear","month","getMonth","day","getDate","today","obj","selectedOfficeCode","val","undefined","openAlarmPreviewPopup","window","open","rsvStr","str","split","showReservation","reservationTime","closeReservation","setConsultReservation","reservation_date","reservation_time","rsv_time","confirm","payload","tt_id","status","mounted"],"sourceRoot":"","sources":["C:\\CSAI_Front\\src\\views\\pages\\alarm\\AlarmNATartgetList.vue"],"sourcesContent":["<template>\r\n<div class=\"search_box\">\r\n  <ul class=\"search_st01\">\r\n    <li>\r\n      <label for=\"officesCode\">국사</label>\r\n      <div class=\"multiselect_box\">\r\n         <multiselect id=\"officesCode\" :change=\"selectedOfficeCode(value)\" v-model=\"value\" tag-placeholder=\"aaa\" placeholder=\"전체\" label=\"name\" track-by=\"code\" :options=\"options\" noResultText=\"전체\" noOptionsText=\"\" :multiple=\"true\" :taggable=\"false\">\r\n         </multiselect>\r\n      </div>\r\n    </li>\r\n    <li>\r\n      <dl>\r\n        <dt>상품</dt>\r\n        <dd><input type=\"checkbox\" id=\"chk2\" name=\"product\" value=\"3000\" @click=\"productChk();\"> <label for=\"chk2\">인터넷</label></dd>\r\n        <dd><input type=\"checkbox\" id=\"chk3\" name=\"product\" value=\"IPM0\" @click=\"productChk();\"> <label for=\"chk3\">TV</label></dd>\r\n      </dl>\r\n    </li>\r\n    <li>\r\n      <label for=\"custName\">고객명</label>\r\n      <input type=\"text\" id=\"custName\" @keyup.enter=\"getNonMoveTgtList(0)\">\r\n    </li>\r\n    <li>\r\n      <label for=\"svcId\">접속번호</label>\r\n      <input type=\"text\" id=\"svcId\" @keyup.enter=\"getNonMoveTgtList(0)\">\r\n    </li>\r\n    <!-- <li>\r\n      <label for=\"troubReceiptDt\">접수일</label>\r\n      <input type=\"date\" id=\"troubReceiptDt\">\r\n    </li> -->\r\n    <li>\r\n      <label for=\"rsvDt\">희망일</label>\r\n      <input type=\"date\" id=\"rsvDt\">\r\n    </li>\r\n    <li>\r\n      <button @click=\"getNonMoveTgtList(0)\">조회</button>\r\n    </li>\r\n  </ul>\r\n</div>\r\n<div class=\"list_box\" style=\"position: relative;\">\r\n  <p>전체건수 : <span id=\"totalCnt\">0</span>건</p>    \r\n  <table>\r\n    <colgroup>\r\n      <col style=\"width:6%\">\r\n      <col style=\"width:8%\">\r\n      <col style=\"width:8%\">\r\n      <col style=\"width:10%\">\r\n      <col style=\"width:10%\">\r\n      <col style=\"width:10%\">\r\n      <col style=\"width:10%\">\r\n      <col style=\"width:8%\">\r\n      <col style=\"width:calc(30% - 360px)\">\r\n      <col style=\"width:180px\">\r\n      <col style=\"width:180px\">\r\n    </colgroup>\r\n    <thead>\r\n      <tr>\r\n        <th>조치여부</th>\r\n        <th>고객명</th>\r\n        <th>상품명</th>\r\n        <th>접속번호</th>\r\n        <th>연락전화번호1</th>\r\n        <th>연락전화번호2</th>\r\n        <!-- <th>접수일시</th> -->\r\n        <th>희망일</th>\r\n        <th>국사</th>\r\n        <th>신고내용</th>\r\n        <th>예약일시</th>\r\n        <th></th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>      \r\n      <!-- no-data-area -->\r\n      <tr v-if=\"nonMoveTgtList.totalElements == 0\">\r\n        <td class=\"no_data\" colspan=\"11\">조회 결과가 없습니다.</td>\r\n      </tr>      \r\n      <tr v-else v-for=\"(item, idx) in nonMoveTgtList.content\" :key=\"idx\" @click=\"openAlarmPreviewPopup(item)\"> \r\n        <td>{{item.cnvrstSttusTxt}}</td>       \r\n        <td>{{StringUtil().cusNmFormatter(item.custName)}}</td>                  \r\n        <td>{{item.svcMainTypeCodeDesc}}</td>                          \r\n        <td>{{StringUtil().phoneFormatter(item.svcId)}}</td>\r\n        <td>{{StringUtil().phoneFormatter(item.reporterTelNum1)}}</td>\r\n        <td>{{StringUtil().phoneFormatter(item.reporterTelNum2)}}</td>\r\n        <!-- <td>{{item.troubReceiptDt}}</td> -->\r\n        <td>{{StringUtil().dateFormatter(item.rsvDt, item.rsvTime)}}</td>\r\n        <td>{{item.officesCodeDesc}}</td>\r\n        <td :title=\"item.reporterOpinion\">{{item.reporterOpinion}}</td>\r\n        <td><div class=\"rsv_date\" @click.stop=\"\" @click=\"showReservation(item)\">{{item.reservationTime == null ? \"예약일시 등록\" : rsvStr(item.reservationTime) }}</div></td> \r\n        <td><div @click.stop=\"\" @click=\"this.$emit('openLayerPop', this.nonMoveTgtList.content[idx])\"><span></span>알림톡 발송</div></td>\r\n      </tr>\r\n      \r\n    </tbody>\r\n  </table>\r\n  <ul class=\"paging\">\r\n    <li class=\"left_page\" v-show=\"prevBlock\" @click=\"getPrevBlock()\"></li>\r\n    <li class=\"left_num\" v-show=\"prevPage\" @click=\"getNonMoveTgtList(this.pageNumber-1)\"></li>    \r\n    <li :class=\"{'on': idx === this.pageNumber}\"                 \r\n      v-show=\"( idx >= (this.blockPageNumber) * this.blockPerPageSize && idx < (this.blockPageNumber+1) * this.blockPerPageSize )\" \r\n      v-for=\"(item, idx) in nonMoveTgtList.totalPages\" :key=\"idx\" @click=\"getNonMoveTgtList(idx)\">{{idx+1}}</li>                            \r\n    <li class=\"right_num\" v-show=\"nextPage\" @click=\"getNonMoveTgtList(this.pageNumber+1)\"></li>\r\n    <li class=\"right_page\" v-show=\"nextBlock\" @click=\"getNextBlock()\"></li>\r\n  </ul>\r\n  <loading-area v-show=\"loading\"/>\r\n</div>\r\n<div class=\"layer_popup\" v-show=\"show_reservation\">\r\n  <div class=\"reservation_box\">\r\n    <h1>예약일시 입력</h1>\r\n    <div class=\"layer_box\">\r\n      <dl class=\"dl_st_01\">\r\n        <dt><label for=\"user_id\">예약일</label></dt>\r\n        <dd>\r\n          <input type=\"date\" class=\"input_st_01\" id=\"reservation_date\" placeholder=\"예약일\" value=\"이준영\">\r\n        </dd>\r\n      </dl>\r\n      <dl>\r\n        <dt><label for=\"user_pw\">예약 시간</label></dt>\r\n        <dd>\r\n          <select class=\"reservation_select\" id=\"reservation_time\">\r\n            <option v-for=\"(item, idx) in reservationDate\" :key=\"idx\" :value=\"item.value\">{{item.value}}</option>\r\n          </select>\r\n        </dd>\r\n      </dl>\r\n      <button @click=\"setConsultReservation\">저장</button>\r\n      <p class=\"error_txt\">{{errorTxt}}</p>\r\n    </div>\r\n    <p class=\"layer_close\" @click=\"closeReservation\"></p>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\n  import StringUtil from '../../../utils/StringUtil';\r\n  import LoadingArea from '@/components/common/layer/LoadingArea'; // 로딩 레이어\r\n  import Multiselect from 'vue-multiselect';\r\n\r\n  let officesCodeArray = new Array();      \r\n\r\n  export default {\r\n    name: 'AlarmNATartgetList',\r\n    emits : [\"openLayerPop\"],\r\n    components: {\r\n      LoadingArea,\r\n      Multiselect\r\n    },\r\n    data() {\r\n      return {\r\n        //------------------------------------------------------------\r\n        // 페이지 처리 \r\n        //------------------------------------------------------------\r\n        pageNumber : 0,           //페이지 번호\r\n        recordSize : 10,          //한페이지당 보여질 리스트 갯수\r\n        prevPage : false,\r\n        nextPage : false,\r\n        //------------------------------------------------------------\r\n        // 페이지 블럭 처리 \r\n        //------------------------------------------------------------\r\n        blockPerPageSize : 10,    //블럭당 보여질 페이지 갯수\r\n        blockPageNumber : 0,      //블럭 페이지번호\r\n        blockPageCnt : 0,         //페이지 블럭 갯수\r\n        prevBlock : false,\r\n        nextBlock : false,\r\n        loading : false,\r\n        value : [\r\n          // {name : '방배국사', code : 'gcode02'},\r\n        ],\r\n        options: [\r\n          // {name : '과천국사', code : 'gcode03'},\r\n          // {name : '목동국사', code : 'gcode04'},\r\n          // {name : '태백국사', code : 'gcode05'},\r\n          // {name : '화곡국사', code : 'gcode06'},\r\n          // {name : '수내국사', code : 'gcode07'},\r\n          // {name : '동대문국사', code : 'gcode08'},\r\n          // {name : '을지로국사', code : 'gcode09'},\r\n          // {name : '신림국사', code : 'gcode10'},\r\n          // {name : '신도림국사', code : 'gcode11'},\r\n        ],\r\n        show_reservation : false,\r\n        reservationDate : [\r\n          {value:\"09:00\"},\r\n          {value:\"10:00\"},\r\n          {value:\"11:00\"},\r\n          {value:\"12:00\"},\r\n          {value:\"13:00\"},\r\n          {value:\"14:00\"},\r\n          {value:\"15:00\"},\r\n          {value:\"16:00\"},\r\n          {value:\"17:00\"},\r\n        ],\r\n        reservationTtId : \"\",\r\n        errorTxt :\"\",\r\n      }\r\n    },    \r\n    created() {\r\n\r\n    },\r\n    computed: {\r\n      // AI 무출동 정보 조회    \r\n      nonMoveTgtList(){      \r\n        return this.$store.state.trouble.nonMoveTgtList;            \r\n      },\r\n      userInfo() {\r\n      // 로그인 사용자 정보\r\n        return this.$store.state.auth.userInfo;\r\n      },\r\n      ossInfo() {\r\n      // 로그인 사용자 정보\r\n        return this.$store.state.auth.ossInfo;\r\n      },\r\n      // 국사정보 조회\r\n      officeCodeList(){\r\n        return this.$store.state.trouble.officeCodeList;            \r\n      }\r\n    },\r\n    methods: {\r\n\r\n      //--------------------------------\r\n      // 국사정보 조회\r\n      //--------------------------------\r\n      getOfficeCodeList(){\r\n        let param = {\r\n          \"userId\" : this.userInfo.loginId  //사용자 ID\r\n        };          \r\n        this.$store.dispatch(\"trouble/officeCodeList\", param).then(() => {           \r\n          for(var i=0; i<this.officeCodeList.length; i++){\r\n            var item = {};\r\n            item.name = this.officeCodeList[i].officesCodeDesc;\r\n            item.code = this.officeCodeList[i].officesCode;\r\n            this.options.push(item);\r\n          }          \r\n          this.getNonMoveTgtList(0);          \r\n        })\r\n        .catch(error => {          \r\n          console.log(error); \r\n        });\r\n      },\r\n      //--------------------------------\r\n      // AI 무출동 대상조회\r\n      //--------------------------------\r\n      getNonMoveTgtList(pageNo) {\r\n        \r\n        if(pageNo < this.blockPageNumber * this.blockPerPageSize){\r\n          this.getPrevBlock(pageNo);\r\n          return;\r\n        }\r\n        if(pageNo == (this.blockPageNumber+1) * this.blockPerPageSize){\r\n          this.getNextBlock(pageNo);\r\n          return;\r\n        }\r\n\r\n        //----------------------------------------------------------------\r\n        // Param Info\r\n        //----------------------------------------------------------------\r\n        let custName = document.getElementById(\"custName\").value;   //고객명\r\n        let svcId = document.getElementById(\"svcId\").value;         //접속번호\r\n        //★★★★★★★★★★★★★★ 추후 확인필요\r\n        if(svcId != null && svcId != ''){          \r\n          svcId = '0' + svcId;\r\n          if(svcId.indexOf('02') == 1){\r\n            svcId = '0' + svcId;\r\n          }\r\n        }        \r\n        //let troubReceiptDt = document.getElementById(\"troubReceiptDt\").value;   //접수일시    \r\n        let rsvDt = document.getElementById(\"rsvDt\").value;                \r\n        let svcMainClsCodeArray = this.productChk();          \r\n\r\n        if(rsvDt == ''){\r\n          alert(\"희망일을 선택 하세요\");\r\n          document.getElementById(\"rsvDt\").focus();\r\n          return;\r\n        }\r\n        rsvDt = rsvDt.replace(/-/g, '');        \r\n\r\n        let ttId = \"\";\r\n        // TTID 값이 URL에 포함될 경우\r\n        if(this.chkNull(this.ossInfo.TTID)){\r\n          //document.getElementById(\"rsvDt\").value = \"\"\r\n          ttId = this.ossInfo.TTID\r\n          //rsvDt = '';\r\n        }\r\n\r\n        let param = {\r\n          \"pageNo\" : pageNo,\r\n          \"recordSize\" : this.recordSize,        \r\n          \"svcMainClsCode\" : svcMainClsCodeArray,\r\n          \"custName\" : custName,\r\n          \"svcId\" : svcId,\r\n          \"ttId\" : ttId,\r\n          //\"troubReceiptDt\" : troubReceiptDt,\r\n          \"rsvDt\" : rsvDt,\r\n          \"userId\" : this.userInfo.loginId,  //사용자 ID\r\n          \"officesCode\" : officesCodeArray\r\n        };\r\n\r\n        this.loading = true;\r\n        this.$store.dispatch(\"trouble/nonMoveTgtList\", param).then(() => {               \r\n          //----------------------------------------------------------------\r\n          // 페이징 처리        \r\n          //----------------------------------------------------------------\r\n          let listObj = this.nonMoveTgtList;          \r\n          this.pageNumber = listObj.pageable.pageNumber;  //페이지 번호\r\n          let totalPages = listObj.totalPages;    //총페이지 수\r\n          let totalCnt = listObj.totalElements; //총 건수          \r\n          document.getElementById(\"totalCnt\").innerHTML = totalCnt.toLocaleString();\r\n          this.pagination(this.pageNumber, totalPages, totalCnt);                \r\n          this.loading = false;\r\n          if(this.chkNull(this.ossInfo.TTID)){\r\n            if(this.nonMoveTgtList.content.length != 0){\r\n              //document.getElementById(\"troubReceiptDt\").value = this.nonMoveTgtList.content[0].troubReceiptDt.split(\" \")[0]\r\n              var rsvDt = this.nonMoveTgtList.content[0].rsvDt;\r\n              var cnvRsvDt = rsvDt.substr(0,4) + \"-\" + rsvDt.substr(4,2) + \"-\" + rsvDt.substr(6,2);              \r\n              document.getElementById(\"rsvDt\").value = cnvRsvDt;              \r\n              this.$emit('openLayerPop', this.nonMoveTgtList.content[0]);\r\n              this.ossInfo.TTID = \"\";\r\n            }\r\n          }\r\n        })\r\n        .catch(error => {\r\n          this.loading = false;\r\n          console.log(error); \r\n        });\r\n      },    \r\n      pagination(pageNumber, totalPages, totalCnt){\r\n        //--------------------------------------\r\n        // 페이지 네비게이션 처리\r\n        //--------------------------------------        \r\n        if(totalCnt == 0){\r\n            this.prevPage = false;      \r\n            this.nextPage = false;\r\n        } else {\r\n          if(pageNumber == 0){\r\n            this.prevPage = false;                  \r\n            if(totalPages == 1){\r\n              this.nextPage = false;\r\n            } else {\r\n              this.nextPage = true;\r\n            }\r\n          } else {\r\n            if(pageNumber == totalPages-1){          \r\n              this.prevPage = true;      \r\n              this.nextPage = false;\r\n            } else {\r\n              this.prevPage = true;     \r\n              this.nextPage = true;       \r\n            }\r\n          }\r\n        }\r\n        \r\n        //--------------------------------------\r\n        // 페이지의 페이지 네비게이션 처리\r\n        //--------------------------------------        \r\n        let blockPageCnt = 0;\r\n        let blockPerPageSize = this.blockPerPageSize;\r\n        if(totalPages % blockPerPageSize == 0){\r\n            blockPageCnt = totalPages / blockPerPageSize;\r\n        } else {\r\n          blockPageCnt = Math.floor((totalPages / blockPerPageSize)) + 1;\r\n        }                \r\n        this.blockPageCnt = blockPageCnt;            \r\n        \r\n        if(this.blockPageNumber == 0){\r\n          this.prevBlock = false;\r\n          if(this.blockPageCnt == 1){\r\n            this.nextBlock = false;\r\n          } else {\r\n            if((this.blockPageNumber+1) <= this.blockPageCnt){\r\n              this.nextBlock = true;\r\n            }\r\n          }          \r\n        } else {\r\n          this.prevBlock = true;          \r\n          if((this.blockPageNumber+1) == this.blockPageCnt){\r\n            this.nextBlock = false;\r\n          } else {\r\n            this.nextBlock = true;\r\n          }\r\n        }\r\n\r\n      },\r\n      getPrevBlock(pageNo){\r\n        this.blockPageNumber = this.blockPageNumber - 1;\r\n        let pageNumber = this.blockPageNumber * this.blockPerPageSize;\r\n        if(pageNo != null){\r\n          pageNumber = pageNo;\r\n        }      \r\n        this.getNonMoveTgtList(pageNumber);\r\n      },\r\n      getNextBlock(pageNo){      \r\n        this.blockPageNumber = this.blockPageNumber + 1;      \r\n        let pageNumber = this.blockPageNumber * this.blockPerPageSize;\r\n        if(pageNo != null){\r\n          pageNumber = pageNo;\r\n        }      \r\n        this.getNonMoveTgtList(pageNumber);\r\n      },\r\n      productChk(){      \r\n        let productArray = new Array();      \r\n        let arrProduct = document.getElementsByName(\"product\");\r\n        for(var i=0; i<arrProduct.length; i++){\r\n          if(arrProduct[i].checked){            \r\n              productArray.push(arrProduct[i].value);\r\n          }\r\n        }      \r\n        return productArray;\r\n      },       \r\n      //접수일자 셋팅\r\n      setReceiptDt(){\r\n        var now = new Date();\r\n        var year = now.getFullYear();\r\n        var month = now.getMonth()+1;\r\n        if(month <= 9){\r\n          month = \"0\" + month;\r\n        }\r\n        var day = now.getDate();\r\n        if(day <= 9){\r\n          day = \"0\" + day;\r\n        }      \r\n        var today = year + \"-\" + month + \"-\" + day;        \r\n        //document.getElementById(\"troubReceiptDt\").value = today;            \r\n        document.getElementById(\"rsvDt\").value = today;\r\n        \r\n      },\r\n      StringUtil(){\r\n        var obj = StringUtil;\r\n        return obj;        \r\n      },      \r\n      selectedOfficeCode(item){                        \r\n        officesCodeArray = new Array(); \r\n        for(var i =0; i<item.length; i++){\r\n          officesCodeArray.push(item[i].code);         \r\n        }               \r\n      },\r\n      chkNull(val){\r\n        if(val != null && val != undefined && val != \"\"){\r\n          return true;\r\n        }else{\r\n          return false;\r\n        }\r\n      },\r\n      openAlarmPreviewPopup(item){\r\n        let options = \"top=10, width=1200, height=950, status=no, menubar=no, toolbar=no, resizable=no\";\r\n        window.open(\"/popup/AlarmPreviewPopup?ttId=\" + item.ttId, \"AlarmPreviewPopup\", options);\r\n      },\r\n      rsvStr(str){\r\n        return str.split(\" \")[0] + \" \" + str.split(\" \")[1].substr(0, 5)\r\n      },\r\n      showReservation(item){\r\n        this.reservationTtId = item.ttId;\r\n        this.show_reservation= true;\r\n        if(item.reservationTime != null){\r\n          document.getElementById(\"reservation_date\").value = item.reservationTime.split(\" \")[0];\r\n          document.getElementById(\"reservation_time\").value = item.reservationTime.split(\" \")[1].substr(0, 5)\r\n        }\r\n\r\n      },\r\n      closeReservation(){\r\n        this.errorTxt = \"\";\r\n        this.show_reservation = false;\r\n      },\r\n      setConsultReservation(){\r\n        let reservation_date = document.getElementById(\"reservation_date\").value;\r\n        \r\n        if(reservation_date == \"\"){\r\n          this.errorTxt = \"예약일을 입력해주세요.\";\r\n          return;\r\n        }\r\n        this.errorTxt = \"\";\r\n        let reservation_time = document.getElementById(\"reservation_time\").value;\r\n        let rsv_time = reservation_date + \" \" + reservation_time;\r\n        if(confirm(rsv_time + \"로 예약 하시겠습니까?\")){\r\n          let payload = {\r\n            tt_id : this.reservationTtId,\r\n            status : 'reservation',\r\n            rsv_time : reservation_date + \"T\" + reservation_time + \":00\"\r\n          }\r\n          this.$store.dispatch(\"consult/consultReservation\", payload).then(() => {\r\n            alert(\"상담이 예약되었습니다.\");\r\n            this.show_reservation = false;\r\n            this.getNonMoveTgtList(0);\r\n          })\r\n          .catch(error => {\r\n            console.log(error);\r\n            this.errorTxt = \"시스템 에러입니다.\";\r\n          });\r\n        }\r\n      },\r\n    },\r\n    mounted(){\r\n      this.setReceiptDt();        //접수일자 셋팅\r\n      this.getOfficeCodeList();   //수용국사 조회\r\n    }\r\n  }\r\n\r\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}